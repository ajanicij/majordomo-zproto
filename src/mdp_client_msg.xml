<class
    name = "mdp_client_msg"
    signature = "4"
    title = "Majordomo Client Protocol"
    script = "zproto_codec_c"
    package_dir = "../include"
    source_dir = "."
    >
    <!-- This file describes Majordomo Client subprotocol as specified by
    the zproto project from ZeroMQ, found at...

    https://github.com/zeromq/zproto

    The corresponding source and header files are generated by
    running this file through gsl with the zproto_codec_c.gsl
    script, e.g.
    
    $ gsl mdp_msg.xml
    
    Obviously, to do this, one needs to have gsl installed. It can
    be found at
    
    https://github.com/imatix/gsl
    
    -->

    This is Majordomo Protocol version 0.2
    
    
    <!-- As laid out by zproject, the license is in the main dir -->
    <include filename = "../license.xml" />
    
    <!-- This file represents version 0.2 of the Majordomo protocol which
    is documented at http://rfc.zeromq.org/spec:18 -->
    <!-- Protocol version -->
    <define name = "VERSION" value = "2" />
    
    <!-- Majordomo/Client subprotocol -->
    <message name = "CLIENT REQUEST" id = "1">
    Client sends a request.
        <field name = "version" type = "string" value = "MDPC02">MDP/Client v0.2</field>
        <field name = "messageid" type = "number" size = "1" value = "1">REQUEST message id</field>
        <field name = "service" type = "string">Service name</field>
        <field name = "body" type = "msg">Request body</field>
    </message>

    <message name = "CLIENT PARTIAL" id = "2">
    Broker sends a partial response from a worker.
        <field name = "version" type = "string" value = "MDPC02">MDP/Client v0.2</field>
        <field name = "messageid" type = "number" size = "1" value = "2">PARTIAL message id</field>
        <field name = "service" type = "string">Service name</field>
        <field name = "body" type = "msg">Reply body</field>
    </message>
    
    <message name = "CLIENT FINAL" id = "3">
        <field name = "version" type = "string" value = "MDPC02">MDP/Client v0.2</field>
        <field name = "messageid" type = "number" size = "1" value = "3">PARTIAL message id</field>
        <field name = "service" type = "string">Service name</field>
        <field name = "body" type = "msg">Reply body</field>
    </message>

</class>
